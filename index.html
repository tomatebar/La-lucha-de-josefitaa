<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Malla Curricular TO</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; margin: 20px; }
    .semestre { border: 2px solid #ccc; padding: 10px; margin-bottom: 20px; background: white; }
    .semestre h2 { margin-top: 0; }
    .ramo {
      background-color: pink;
      border: 1px solid #999;
      padding: 8px;
      margin: 5px 0;
      cursor: pointer;
      transition: 0.3s;
      position: relative;
    }
    .aprobado {
      background-color: purple;
      color: white;
      text-decoration: line-through;
    }
    .bloqueado {
      background-color: #ccc;
      color: #666;
      cursor: not-allowed;
    }
    .notas { margin-top: 5px; }
    .notas input {
      width: 40px;
      margin-right: 3px;
    }
    .promedio {
      font-weight: bold;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Terapia Ocupacional</h1>

  <div id="contenedor-malla"></div>

  <script>
    const ramos = {
      "1er Semestre": [
        { id: "intro_to", nombre: "Intro. a la T.O" },
        { id: "etica", nombre: "칄tica en Salud" },
        { id: "quimica", nombre: "Integrado Qu칤mico Biol칩gico" },
        { id: "comunicacion", nombre: "Habilidades de Comunicaci칩n" },
        { id: "trabajo_comunitario", nombre: "Intro. al Trabajo Comunitario" },
        { id: "ingles1", nombre: "Ingl칠s I" },
        { id: "psico_comunicacion", nombre: "Psicolog칤a de la Comunicaci칩n" },
        { id: "practica1", nombre: "Pr치ctica Curricular I", prerequisitos: ["admision"] }
      ],
      "2do Semestre": [
        { id: "fundamentos_to", nombre: "Fundamentos para la T.O", prerequisitos: ["intro_to"] },
        { id: "morfologia", nombre: "Integrado Morfolog칤a Humana" },
        { id: "socioantropologia", nombre: "Socioantropolog칤a" },
        { id: "ingles2", nombre: "Ingl칠s II" },
        { id: "inclusion1", nombre: "Inclusi칩n Social I" },
        { id: "transversal1", nombre: "Curso Transversal Inst. I" },
        { id: "electivo", nombre: "Electivo Formaci칩n General" },
        { id: "practica2", nombre: "Pr치ctica Curricular II", prerequisitos: ["fundamentos_to", "practica1"] }
      ],
      "3er Semestre": [
        { id: "modelos1", nombre: "Modelos de Intervenci칩n I", prerequisitos: ["fundamentos_to"] },
        { id: "fisiologia", nombre: "Integrado de Fisiolog칤a Humana", prerequisitos: ["quimica"] },
        { id: "educacion_salud", nombre: "Educaci칩n en Salud", prerequisitos: ["trabajo_comunitario"] },
        { id: "locomotor", nombre: "Anatom칤a Funcional y Biomec치nica", prerequisitos: ["morfologia"] },
        { id: "habilidades1", nombre: "Habilidades Terap칠uticas I", prerequisitos: ["fundamentos_to"] },
        { id: "inclusion2", nombre: "Inclusi칩n Social II", prerequisitos: ["inclusion1"] },
        { id: "curso_vida1", nombre: "Curso de Vida I", prerequisitos: ["admision"] },
        { id: "practica3", nombre: "Pr치ctica Curricular III", prerequisitos: ["fundamentos_to", "practica2"] }
      ],
      "4to Semestre": [
        { id: "modelos2", nombre: "Modelos de Intervenci칩n II", prerequisitos: ["modelos1"] },
        { id: "neuro", nombre: "Integrado Neurociencia", prerequisitos: ["fisiologia"] },
        { id: "salud_publica", nombre: "Salud P칰blica", prerequisitos: ["trabajo_comunitario"] },
        { id: "habilidades2", nombre: "Habilidades Terap칠uticas II", prerequisitos: ["habilidades1"] },
        { id: "curso_vida2", nombre: "Curso de Vida II", prerequisitos: ["admision"] },
        { id: "inclusion3", nombre: "Inclusi칩n Social III", prerequisitos: ["inclusion1"] },
        { id: "transversal2", nombre: "Curso Transversal Inst. II", prerequisitos: ["admision"] },
        { id: "practica4", nombre: "Pr치ctica Curricular IV", prerequisitos: ["modelos1", "practica3"] }
      ],
      "5to Semestre": [
        { id: "examen_basico", nombre: "Examen Competencias Tramo B치sico" },
        { id: "ninos1", nombre: "TO en Ni침os I", prerequisitos: ["modelos2"] },
        { id: "adultos1", nombre: "TO en Adultos I", prerequisitos: ["modelos2"] },
        { id: "mayores1", nombre: "TO en Mayores I", prerequisitos: ["modelos2"] },
        { id: "gestion", nombre: "Gesti칩n en Salud", prerequisitos: ["salud_publica"] },
        { id: "analisis_datos", nombre: "Intro An치lisis de Datos", prerequisitos: ["admision"] },
        { id: "metodo1", nombre: "Metodolog칤a Investigaci칩n I", prerequisitos: ["admision"] },
        { id: "practica5", nombre: "Pr치ctica Curricular V", prerequisitos: ["modelos2", "practica4"] }
      ],
      "6to Semestre": [
        { id: "ninos2", nombre: "TO en Ni침os II", prerequisitos: ["ninos1"] },
        { id: "adultos2", nombre: "TO en Adultos II", prerequisitos: ["adultos1"] },
        { id: "mayores2", nombre: "TO en Mayores II", prerequisitos: ["mayores1"] },
        { id: "tecnologias", nombre: "Nuevas Tecnolog칤as TO", prerequisitos: ["admision"] },
        { id: "liderazgo", nombre: "Gesti칩n y Liderazgo", prerequisitos: ["admision"] },
        { id: "metodo2", nombre: "Metodolog칤a Investigaci칩n II", prerequisitos: ["metodo1"] },
        { id: "ergonomia1", nombre: "Ergonom칤a I", prerequisitos: ["locomotor"] },
        { id: "practica6", nombre: "Pr치ctica Curricular VI", prerequisitos: ["ninos1", "adultos1", "mayores1", "practica5"] }
      ],
      "7mo Semestre": [
        { id: "ninos3", nombre: "TO en Ni침os III", prerequisitos: ["ninos2"] },
        { id: "adultos3", nombre: "TO en Adultos III", prerequisitos: ["adultos2"] },
        { id: "mayores3", nombre: "TO en Mayores III", prerequisitos: ["mayores2"] },
        { id: "ergonomia2", nombre: "Ergonom칤a II", prerequisitos: ["ergonomia1"] },
        { id: "inclusion_proy1", nombre: "Proyecto Inclusi칩n I", prerequisitos: ["liderazgo"] },
        { id: "ortotica1", nombre: "Ortotica I", prerequisitos: ["locomotor"] },
        { id: "investigacion1", nombre: "Proyecto Investigaci칩n I", prerequisitos: ["metodo2"] },
        { id: "practica7", nombre: "Pr치ctica Curricular VII", prerequisitos: ["practica6", "modelos2"] }
      ],
      "8vo Semestre": [
        { id: "ninos4", nombre: "TO en Ni침os IV", prerequisitos: ["ninos3"] },
        { id: "adultos4", nombre: "TO en Adultos IV", prerequisitos: ["adultos3"] },
        { id: "mayores4", nombre: "TO en Mayores IV", prerequisitos: ["mayores3"] },
        { id: "ortotica2", nombre: "Ortotica II", prerequisitos: ["ortotica1"] },
        { id: "inclusion_proy2", nombre: "Proyecto Inclusi칩n II", prerequisitos: ["inclusion_proy1"] },
        { id: "investigacion2", nombre: "Proyecto Investigaci칩n II", prerequisitos: ["investigacion1"] },
        { id: "bioetica", nombre: "Bio칠tica", prerequisitos: ["etica"] },
        { id: "practica8", nombre: "Pr치ctica Curricular VIII", prerequisitos: ["practica7", "mayores3"] }
      ],
      "9no y 10mo Semestre": [
        { id: "examen_final", nombre: "Examen Final Competencias", prerequisitos: ["practica8"] },
        { id: "practica_prof1", nombre: "Pr치ctica Profesional I", prerequisitos: ["practica8"] },
        { id: "practica_prof2", nombre: "Pr치ctica Profesional II", prerequisitos: ["practica8"] },
        { id: "practica_prof3", nombre: "Pr치ctica Profesional III", prerequisitos: ["practica8"] }
      ]
    };

    const aprobados = new Set();
    const notas = {};

    function calcularPromedio(id) {
      const notasRamo = notas[id] || [0, 0, 0, 0];
      return (
        notasRamo[0] * 0.2 +
        notasRamo[1] * 0.25 +
        notasRamo[2] * 0.3 +
        notasRamo[3] * 0.25
      ).toFixed(1);
    }

    function renderMalla() {
      const container = document.getElementById("contenedor-malla");
      container.innerHTML = "";

      for (let semestre in ramos) {
        const div = document.createElement("div");
        div.className = "semestre";
        const title = document.createElement("h2");
        title.textContent = semestre;
        div.appendChild(title);

        ramos[semestre].forEach(ramo => {
          const r = document.createElement("div");
          r.className = "ramo";
          const bloqueado = ramo.prerequisitos && !ramo.prerequisitos.every(p => aprobados.has(p));
          const aprobado = aprobados.has(ramo.id);

          if (aprobado) r.classList.add("aprobado");
          else if (bloqueado) r.classList.add("bloqueado");

          const nombre = document.createElement("span");
          nombre.textContent = ramo.nombre;

          const promedio = document.createElement("span");
          promedio.className = "promedio";
          promedio.textContent = `游뽕 Prom: ${calcularPromedio(ramo.id)}`;

          r.appendChild(nombre);
          r.appendChild(promedio);

          if (!bloqueado) {
            r.onclick = () => {
              if (aprobados.has(ramo.id)) aprobados.delete(ramo.id);
              else aprobados.add(ramo.id);
              guardarDatos();
              renderMalla();
            };
          }

          const divNotas = document.createElement("div");
          divNotas.className = "notas";
          divNotas.innerHTML = "Notas: ";
          notas[ramo.id] = notas[ramo.id] || [0, 0, 0, 0];
          for (let i = 0; i < 4; i++) {
            const input = document.createElement("input");
            input.type = "number";
            input.min = 1;
            input.max = 7;
            input.step = 0.1;
            input.value = notas[ramo.id][i];
            input.oninput = () => {
              notas[ramo.id][i] = parseFloat(input.value) || 0;
              promedio.textContent = `游뽕 Prom: ${calcularPromedio(ramo.id)}`;
            };
            divNotas.appendChild(input);
          }
          r.appendChild(divNotas);

          div.appendChild(r);
        });

        container.appendChild(div);
      }
    }

    guardarDatos();
              renderMalla();
  </script>
</body>
</html>
